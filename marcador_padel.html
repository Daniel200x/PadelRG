<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marcador de Tenis - OBS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: transparent;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        
        .scoreboard {
            width: 600px;
            background: rgba(0, 30, 60, 0.95);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 2px solid #1a5fb4;
        }
        
        .header {
            background: linear-gradient(to right, #1a5fb4, #3584e4);
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }
        
        .score-table {
            width: 100%;
            border-collapse: collapse;
            color: white;
        }
        
        .score-table th {
            background: rgba(0, 20, 40, 0.9);
            padding: 10px 5px;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .score-table th:first-child {
            width: 120px;
        }
        
        .score-table td {
            padding: 12px 5px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 40, 80, 0.7);
        }
        
        .score-table td:first-child {
            text-align: left;
            padding-left: 15px;
            background: rgba(0, 20, 40, 0.9);
            font-weight: 600;
        }
        
        .team-a td:first-child {
            border-left: 4px solid #ff6b6b;
        }
        
        .team-b td:first-child {
            border-left: 4px solid #4ecdc4;
        }
        
        .tie-break {
            color: #ffa726;
            font-weight: bold;
        }
        
        .match-status {
            text-align: center;
            padding: 8px;
            background: rgba(0, 20, 40, 0.9);
            color: #ffa726;
            font-weight: bold;
            font-size: 16px;
        }
        
        .control-panel {
            background: rgba(0, 30, 60, 0.95);
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 2px solid #1a5fb4;
            width: 250px;
        }
        
        .control-panel h3 {
            color: white;
            text-align: center;
            margin-bottom: 15px;
            font-size: 16px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group h4 {
            color: white;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .control-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
        }
        
        button {
            padding: 8px 5px;
            border: none;
            border-radius: 4px;
            background: #3584e4;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 12px;
        }
        
        button:hover {
            opacity: 0.9;
        }
        
        .team-a-btn {
            background: #ff6b6b;
        }
        
        .team-b-btn {
            background: #4ecdc4;
        }
        
        .tie-break-btn {
            background: #ffa726;
        }
        
        .reset-btn {
            background: #ef4444;
        }
        
        .player-names {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .player-names input {
            padding: 6px;
            border: 1px solid #3584e4;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="scoreboard">
            <div class="header">MARCADOR DE TENIS</div>
            
            <table class="score-table">
                <thead>
                    <tr>
                        <th>JUGADOR</th>
                        <th>SET 1</th>
                        <th>SET 2</th>
                        <th>SET 3</th>
                        <th>GAME</th>
                        <th>PUNTOS</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="team-a">
                        <td id="player-a-name">Player A</td>
                        <td id="set1-a">0</td>
                        <td id="set2-a">0</td>
                        <td id="set3-a">0</td>
                        <td id="game-a">0</td>
                        <td id="points-a">0</td>
                    </tr>
                    <tr class="team-b">
                        <td id="player-b-name">Player B</td>
                        <td id="set1-b">0</td>
                        <td id="set2-b">0</td>
                        <td id="set3-b">0</td>
                        <td id="game-b">0</td>
                        <td id="points-b">0</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="match-status" id="match-status">Partido en curso</div>
        </div>

        <div class="control-panel">
            <h3>PANEL DE CONTROL</h3>
            
            <div class="player-names">
                <input type="text" id="player-a-input" placeholder="Jugador A" value="Player A">
                <input type="text" id="player-b-input" placeholder="Jugador B" value="Player B">
            </div>
            
            <div class="control-group">
                <h4>CONTROLES DE PUNTOS</h4>
                <div class="control-buttons">
                    <button class="team-a-btn" onclick="addPoint('A')">Punto A</button>
                    <button class="team-b-btn" onclick="addPoint('B')">Punto B</button>
                </div>
            </div>
            
            <div class="control-group">
                <h4>CONTROLES DE GAMES</h4>
                <div class="control-buttons">
                    <button class="team-a-btn" onclick="addGame('A')">Game A</button>
                    <button class="team-b-btn" onclick="addGame('B')">Game B</button>
                </div>
            </div>
            
            <div class="control-group">
                <h4>TIE-BREAK</h4>
                <div class="control-buttons">
                    <button class="tie-break-btn" onclick="addTieBreakPoint('A')">Punto A</button>
                    <button class="tie-break-btn" onclick="addTieBreakPoint('B')">Punto B</button>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="reset-btn" onclick="resetMatch()">Reiniciar Partido</button>
            </div>
        </div>
    </div>

    <script>
        // Estado del partido - SIMPLIFICADO
        let matchState = {
            currentSet: 1,
            set1: { a: 0, b: 0 },
            set2: { a: 0, b: 0 },
            set3: { a: 0, b: 0 },
            game: { a: 0, b: 0 },
            points: { a: 0, b: 0 },
            tieBreak: false,
            matchFinished: false
        };

        // Actualizar la visualización
        function updateDisplay() {
            console.log("Actualizando display:", matchState);
            
            // Actualizar sets
            document.getElementById('set1-a').textContent = matchState.set1.a;
            document.getElementById('set1-b').textContent = matchState.set1.b;
            document.getElementById('set2-a').textContent = matchState.set2.a;
            document.getElementById('set2-b').textContent = matchState.set2.b;
            document.getElementById('set3-a').textContent = matchState.set3.a;
            document.getElementById('set3-b').textContent = matchState.set3.b;
            
            // Actualizar games
            document.getElementById('game-a').textContent = matchState.game.a;
            document.getElementById('game-b').textContent = matchState.game.b;
            
            // Actualizar puntos
            if (matchState.tieBreak) {
                document.getElementById('points-a').textContent = matchState.points.a;
                document.getElementById('points-b').textContent = matchState.points.b;
                document.getElementById('points-a').className = 'tie-break';
                document.getElementById('points-b').className = 'tie-break';
            } else {
                let pointsA = matchState.points.a;
                let pointsB = matchState.points.b;
                
                // Convertir a sistema de tenis
                if (pointsA === 0) pointsA = '0';
                else if (pointsA === 1) pointsA = '15';
                else if (pointsA === 2) pointsA = '30';
                else if (pointsA === 3) pointsA = '40';
                else if (pointsA === pointsB) pointsA = '40';
                else if (pointsA > pointsB) pointsA = 'AD';
                
                if (pointsB === 0) pointsB = '0';
                else if (pointsB === 1) pointsB = '15';
                else if (pointsB === 2) pointsB = '30';
                else if (pointsB === 3) pointsB = '40';
                else if (pointsB === pointsA) pointsB = '40';
                else if (pointsB > pointsA) pointsB = 'AD';
                
                document.getElementById('points-a').textContent = pointsA;
                document.getElementById('points-b').textContent = pointsB;
                document.getElementById('points-a').className = '';
                document.getElementById('points-b').className = '';
            }
            
            // Estado del partido
            if (matchState.matchFinished) {
                document.getElementById('match-status').textContent = 'PARTIDO FINALIZADO';
            } else if (matchState.tieBreak) {
                document.getElementById('match-status').textContent = 'TIE-BREAK';
            } else {
                document.getElementById('match-status').textContent = 'Partido en curso';
            }
        }

        // Añadir punto - VERSIÓN SIMPLIFICADA
        function addPoint(team) {
            if (matchState.matchFinished) return;
            
            const opp = team === 'A' ? 'B' : 'A';
            
            console.log(`Añadiendo punto a ${team}`, matchState);
            
            matchState.points[team]++;
            
            // Verificar si se gana el game
            if (matchState.tieBreak) {
                // Tie-break
                if (matchState.points[team] >= 7 && matchState.points[team] - matchState.points[opp] >= 2) {
                    winGame(team);
                }
            } else {
                // Game normal
                if (matchState.points[team] >= 4 && matchState.points[team] - matchState.points[opp] >= 2) {
                    winGame(team);
                }
            }
            
            updateDisplay();
        }

        // Añadir game completo
        function addGame(team) {
            if (matchState.matchFinished) return;
            
            console.log(`Añadiendo game a ${team}`);
            winGame(team);
            updateDisplay();
        }

        // Ganar un game
        function winGame(team) {
            const opp = team === 'A' ? 'B' : 'A';
            
            matchState.game[team]++;
            
            // Verificar tie-break (6-6)
            if (matchState.game.a === 6 && matchState.game.b === 6) {
                matchState.tieBreak = true;
                matchState.points = { a: 0, b: 0 };
                updateDisplay();
                return;
            }
            
            // Verificar si se gana el set
            if (matchState.game[team] >= 6 && matchState.game[team] - matchState.game[opp] >= 2) {
                winSet(team);
            }
            
            // Resetear puntos
            matchState.points = { a: 0, b: 0 };
            matchState.tieBreak = false;
        }

        // Ganar un set
        function winSet(team) {
            // Guardar en el set actual
            if (matchState.currentSet === 1) {
                matchState.set1[team]++;
            } else if (matchState.currentSet === 2) {
                matchState.set2[team]++;
            } else if (matchState.currentSet === 3) {
                matchState.set3[team]++;
            }
            
            // Verificar si se gana el partido
            const setsA = matchState.set1.a + matchState.set2.a + matchState.set3.a;
            const setsB = matchState.set1.b + matchState.set2.b + matchState.set3.b;
            
            if (setsA >= 2 || setsB >= 2) {
                matchState.matchFinished = true;
            } else {
                // Pasar al siguiente set
                matchState.currentSet++;
                matchState.game = { a: 0, b: 0 };
                matchState.points = { a: 0, b: 0 };
            }
        }

        // Punto de tie-break
        function addTieBreakPoint(team) {
            if (!matchState.tieBreak) {
                matchState.tieBreak = true;
                matchState.points = { a: 0, b: 0 };
            }
            addPoint(team);
        }

        // Reiniciar partido
        function resetMatch() {
            console.log("Reiniciando partido");
            matchState = {
                currentSet: 1,
                set1: { a: 0, b: 0 },
                set2: { a: 0, b: 0 },
                set3: { a: 0, b: 0 },
                game: { a: 0, b: 0 },
                points: { a: 0, b: 0 },
                tieBreak: false,
                matchFinished: false
            };
            updateDisplay();
        }

        // Actualizar nombres
        document.getElementById('player-a-input').addEventListener('input', function() {
            document.getElementById('player-a-name').textContent = this.value || 'Player A';
        });
        
        document.getElementById('player-b-input').addEventListener('input', function() {
            document.getElementById('player-b-name').textContent = this.value || 'Player B';
        });

        // Inicializar
        updateDisplay();
        console.log("Marcador inicializado correctamente");
    </script>
</body>
</html>